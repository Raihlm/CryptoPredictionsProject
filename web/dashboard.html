<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Bitcoin Price Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/web/static/style.css">
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
   <!-- Option 1: Chart.js with Financial Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
  
  <!-- Option 2: TradingView Lightweight Charts (Recommended) -->
  <script src="https://unpkg.com/lightweight-charts/dist/lightweight-charts.standalone.production.js"></script>
  
  <!-- Option 3: ApexCharts (Good alternative) -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
</head>
<body>
  <div class="background-animation">
    <div class="floating-shapes">
      <div class="shape"></div>
      <div class="shape"></div>
      <div class="shape"></div>
    </div>
  </div>

  <header class="header">
    <div class="header-content">
      <div class="logo">
        <i class="fab fa-bitcoin"></i>
        <h1>CryptoVision</h1>
      </div>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span>Live Data</span>
        <span id="last-update">Updated now</span>
      </div>
    </div>
  </header>

  <div class="content-wrapper">
    <div class="sidebar">
      <div class="logo-section">
        <div class="bitcoin-logo">₿</div>
        <div class="crypto-info">
          <h2>Bitcoin</h2>
          <div class="subtitle">Cryptocurrency</div>
        </div>
        <div class="classification-report">
          <h4>Model Performance</h4>
          <ul>
            <li>R² Score: <span id="r2-score">--</span></li>
            <li>MAE: <span id="mae">--</span></li>
            <li>RMSE: <span id="rmse">--</span></li>
          </ul>
        </div>
      </div>

      <div class="project-description">
        <h3>About This Dashboard</h3>
        <p>This advanced Bitcoin analytics dashboard provides real-time market price and historical data visualization through interactive line and candlestick charts.</p>
        <p>Experience comprehensive daily trading analysis with sophisticated moving averages and predictive algorithms powered by machine learning using Linear Regression and Random Forest.</p>
      </div>

      <div class="features">
        <h4>Key Features</h4>
        <ul class="feature-list">
          <li>Real-time price tracking</li>
          <li>Interactive candlestick & line charts</li>
          <li><s>Advanced technical indicators</s></li>
          <li>AI-powered price predictions</li>
          <li>Historical data analysis</li>
          <li><s>Market sentiment tracking</s></li>
          <li><s>Market sentiment & News analysis</s></li>

        </ul>
      </div>

      <button class="cta-button" onclick="window.location.href='../web/bitcoinInfo.html'">
        Learn About Bitcoin →
      </button>
    </div>

    <div class="main-container">
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Current Price</span>
            <i class="fas fa-dollar-sign stat-icon"></i>
          </div>
          <div id="current-price" class="stat-value">Loading...</div>
          <div id="price-change" class="stat-change">
            <i class="fas fa-arrow-up"></i>
            <span>Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">24h Volume</span>
            <i class="fas fa-chart-bar stat-icon"></i>
          </div>
          <div id="volume" class="stat-value">Loading...</div>
          <div class="stat-change">
            <i class="fas fa-chart-line"></i>
            <span>Trading Activity</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">Market Cap</span>
            <i class="fas fa-coins stat-icon"></i>
          </div>
          <div id="market-cap" class="stat-value">Loading...</div>
          <div id="market-cap-rank" class="stat-change">
            <i class="fas fa-trophy"></i>
            <span>Global Rank: Loading...</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-header">
            <span class="stat-label">24h High/Low</span>
            <i class="fas fa-arrows-alt-v stat-icon"></i>
          </div>
          <div id="high-low" class="stat-value">Loading...</div>
          <div class="stat-change">
            <i class="fas fa-chart-area"></i>
            <span>Price Range</span>
          </div>
        </div>
      </div>

      <div class="chart-section">
        <div class="chart-header">
          <h2 class="chart-title">Bitcoin Price Analysis</h2>
          <div class="chart-controls">
            <div class="control-group">
              <button class="control-btn active" data-charttype="candlestick">
                <i class="fas fa-chart-line"></i> Candlestick
              </button>
              <button class="control-btn" data-charttype="line">
                <i class="fas fa-chart-area"></i> Line Chart
              </button>
            </div>
            <!-- Satu set timeframe untuk keduanya -->
              <div class="timeframe-controls" id="unified-timeframe">
               <button class="timeframe-btn active" data-timeframe="daily">Daily</button>
               <button class="timeframe-btn" data-timeframe="monthly">Monthly</button>
               <button class="timeframe-btn" data-timeframe="yearly">Yearly</button>
             </div>
          </div>
        </div>
        <div class="chart-container">
          <div id="candlestick-container">
            <canvas id="candlestickChart" width="800" height="400"></canvas>
          </div>
          <div id="line-container" class="hidden">
            <canvas id="lineChart"></canvas>
          </div>
        </div>
      </div>

      <div class="predictions-section">
        <div class="predictions-header">
          <h2 class="predictions-title">AI Price Predictions</h2>
          <p class="predictions-subtitle">Advanced machine learning models analyzing market trends</p>
        </div>
  
        <div class="model-selector">
          <button class="model-btn active" data-model="linear" onclick="setActiveModel('linear')">
            <i class="fas fa-brain"></i> Linear Regression
          </button>
          <button class="model-btn" data-model="random_forest" onclick="setActiveModel('random_forest')">
            <i class="fas fa-tree"></i> Random Forest
          </button>
        </div>
  
        <div class="prediction-cards">
          <div class="prediction-card">
            <h3>Next Day</h3>
            <div class="prediction-value" id="next-day">$--</div>
            <div class="confidence">
              <span id="next-day-conf">--%</span>
              <div class="confidence-bar">
                <div class="confidence-fill" id="next-day-bar" style="width: 0%"></div>
              </div>
            </div>
          </div>
          <div class="prediction-card">
            <h3>Next Week</h3>
            <div class="prediction-value" id="next-week">$--</div>
            <div class="confidence">
              <span id="next-week-conf">--%</span>
              <div class="confidence-bar">
                <div class="confidence-fill" id="next-week-bar" style="width: 0%"></div>
              </div>
            </div>
          </div>
          <div class="prediction-card">
            <h3>Next Month</h3>
            <div class="prediction-value" id="next-month">$--</div>
            <div class="confidence">
              <span id="next-month-conf">--%</span>
              <div class="confidence-bar">
                <div class="confidence-fill" id="next-month-bar" style="width: 0%"></div>
              </div>
            </div>
          </div>
          <div class="prediction-card">
            <h3>Next Year</h3>
            <div class="prediction-value" id="next-year">$--</div>
            <div class="confidence">
              <span id="next-year-conf">--%</span>
              <div class="confidence-bar">
                <div class="confidence-fill" id="next-year-bar" style="width: 0%"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="historical-predictions-section">
          <button class="history-btn" id="show-history-btn">
            <i class="fas fa-history"></i> View Historical Predictions
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Historical Predictions Popup -->
  <div id="historical-popup" class="popup-overlay" style="display: none;">
    <div class="popup-content">
      <div class="popup-header">
        <h3>Historical Predictions</h3>
        <button class="close-btn" id="close-history-btn">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="popup-body">
        <div class="filter-controls">
          <select id="model-filter">
            <option value="all">All Models</option>
            <option value="linear">Linear Regression</option>
            <option value="random_forest">Random Forest</option>
          </select>
        </div>
        <div class="predictions-list" id="historical-predictions-list">
          <p>Loading historical predictions...</p>
        </div>
      </div>
    </div>
  </div>

  <script src="/web/static/script.js" type="module"></script>
</body>
</html>
